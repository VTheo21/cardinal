<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sinc fullscreen</title>

<style>
html, body {
  margin: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: #06080f;
}

canvas {
  display: block;
}
</style>
</head>
<body>

<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

const DURATION = 2000; // 3 secondes
const X_RANGE = 18;   // largeur du sinc

function resize() {
  const dpr = window.devicePixelRatio || 1;
  canvas.width = innerWidth * dpr;
  canvas.height = innerHeight * dpr;
  canvas.style.width = innerWidth + "px";
  canvas.style.height = innerHeight + "px";
  ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
}

const sinc = x => Math.abs(x) < 1e-6 ? 1 : Math.sin(x) / x;

function draw(progress) {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  const w = canvas.clientWidth;
  const h = canvas.clientHeight;

  const xMin = -X_RANGE;
  const xMax = xMin + (2 * X_RANGE * progress);

  ctx.beginPath();
  ctx.lineWidth = 4;
  ctx.strokeStyle = "rgba(120,190,255,0.9)";

  const steps = 2000;

  for (let i = 0; i <= steps; i++) {
    const t = i / steps;
    const x = xMin + (xMax - xMin) * t;
    const y = sinc(x);

    const px = (x + X_RANGE) / (2 * X_RANGE) * w;
    const py = h / 2 - y * h * 0.35;

    if (i === 0) ctx.moveTo(px, py);
    else ctx.lineTo(px, py);
  }

  ctx.stroke();
}

function animate() {
  const start = performance.now();

  function frame(now) {
    const p = Math.min(1, (now - start) / DURATION);
    draw(p);
    if (p < 1) requestAnimationFrame(frame);
  }

  requestAnimationFrame(frame);
}

window.addEventListener("resize", () => {
  resize();
  animate();
});

resize();
animate();
</script>

</body>
</html>
